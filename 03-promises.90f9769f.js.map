{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAGMC,EAAO,CACXC,OAAQC,SAASC,cAAc,SAC/BC,QAASF,SAASC,cAAc,wBAChCE,OAAQH,SAASC,cAAc,uBAC/BG,SAAUJ,SAASC,cAAc,yBACjCI,SAAUL,SAASC,cAAc,iBACjCK,SAAUN,SAASC,cAAc,kBAmCnC,SAASM,EAA0BC,GACjCA,EACGC,MAAK,SAAAC,G,IAAGC,EAAQD,EAARC,SAAUC,EAAKF,EAALE,M,OACjBhB,EAAAiB,OAAOC,QAAQ,uBAA4CC,OAAnBJ,EAAW,EAAE,QAAYI,OAANH,EAAM,M,IAElEI,OAAM,SAAAN,G,IAAGC,EAAQD,EAARC,SAAUC,EAAKF,EAALE,M,OAClBhB,EAAAiB,OAAOI,QAAQ,sBAAyCF,OAAnBJ,EAAW,EAAE,QAAYI,OAANH,EAAM,M,IAapE,SAASM,EAAcP,EAAUC,GAC/B,OAAO,IAAIO,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,WACLH,GACFF,EAAQ,CAAET,WAAUC,UAEtBS,EAAO,CAAEV,WAAUC,S,GAClBA,E,IA3DPd,EAAKC,OAAO2B,iBAAiB,UAAU,SAAAC,GAErC,GADAA,EAAEC,kBACGD,EAAEE,gBAAkB/B,EAAKC,OAA9B,CAKAD,EAAKO,SAASyB,UAAW,EAEzB,IAAMC,EAiCR,SAAkCC,EAAYC,EAAMC,GAElD,IADA,IAAMH,EAAW,GACRpB,EAAW,EAAGA,EAAWuB,EAAQvB,GAAY,EAAG,CACvD,IAAMwB,EAAeH,EAAaC,EAAOtB,EACzCoB,EAASK,KAAKlB,EAAcP,EAAUwB,G,CAExC,OAAOJ,C,CAvCUM,CACfvC,EAAKI,QAAQoC,cACbxC,EAAKK,OAAOmC,cACZxC,EAAKM,SAASkC,eAGhBP,EAASQ,IAAIhC,GAGbY,QAAQqB,WAAWT,GAAUtB,MAAK,WAChCX,EAAKO,SAASyB,UAAW,C,GAhBzB,C,IAoBJhC,EAAKQ,SAASoB,iBAAiB,SAE/B,WACwBH,KAAKC,SAC3B1B,EAAKI,QAAQuC,MAAQlB,KAAKmB,MAAsB,IAAhBnB,KAAKC,SAAkB,KACvD1B,EAAKK,OAAOsC,MAAQlB,KAAKmB,MAAsB,IAAhBnB,KAAKC,SAAiB,KACrD1B,EAAKM,SAASqC,MAAQlB,KAAKmB,MAAsB,GAAhBnB,KAAKC,SAAgB,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  delayEl: document.querySelector('.form [name=\"delay\"]'),\n  stepEl: document.querySelector('.form [name=\"step\"]'),\n  amountEl: document.querySelector('.form [name=\"amount\"]'),\n  submitEl: document.querySelector('.form .submit'),\n  randomEl: document.querySelector('.form .random'),\n};\n\nrefs.formEl.addEventListener('submit', e => {\n  e.preventDefault();\n  if (!e.currentTarget === refs.formEl) {\n    return;\n  }\n\n  //Disable button\n  refs.submitEl.disabled = true;\n\n  const promises = createPromisesCollection(\n    refs.delayEl.valueAsNumber,\n    refs.stepEl.valueAsNumber,\n    refs.amountEl.valueAsNumber\n  );\n\n  promises.map(processingPromisesResults);\n\n  //Enable button\n  Promise.allSettled(promises).then(() => {\n    refs.submitEl.disabled = false;\n  });\n});\n\nrefs.randomEl.addEventListener('click', randomizeValues);\n\nfunction randomizeValues() {\n  const shouldResolve = Math.random() > 0.3;\n  refs.delayEl.value = Math.floor(Math.random() * 1000 + 500);\n  refs.stepEl.value = Math.floor(Math.random() * 500 + 200);\n  refs.amountEl.value = Math.floor(Math.random() * 10 + 2);\n}\n\nfunction processingPromisesResults(promise) {\n  promise\n    .then(({ position, delay }) =>\n      Notify.success(`✅ Fulfilled promise ${position + 1} in ${delay}ms`)\n    )\n    .catch(({ position, delay }) =>\n      Notify.failure(`❌ Rejected promise ${position + 1} in ${delay}ms`)\n    );\n}\n\nfunction createPromisesCollection(basicDelay, step, amount) {\n  const promises = [];\n  for (let position = 0; position < amount; position += 1) {\n    const currentDelay = basicDelay + step * position;\n    promises.push(createPromise(position, currentDelay));\n  }\n  return promises;\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      }\n      reject({ position, delay });\n    }, delay);\n  });\n}\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$refs","formEl","document","querySelector","delayEl","stepEl","amountEl","submitEl","randomEl","$ce04d3a99e08e73b$var$processingPromisesResults","promise","then","param","position","delay","Notify","success","concat","catch","failure","$ce04d3a99e08e73b$var$createPromise","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","addEventListener","e","preventDefault","currentTarget","disabled","promises","basicDelay","step","amount","currentDelay","push","$ce04d3a99e08e73b$var$createPromisesCollection","valueAsNumber","map","allSettled","value","floor"],"version":3,"file":"03-promises.90f9769f.js.map"}