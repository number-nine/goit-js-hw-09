{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAGA,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,SAC/BC,QAASF,SAASC,cAAc,wBAChCE,OAAQH,SAASC,cAAc,uBAC/BG,SAAUJ,SAASC,cAAc,yBACjCI,SAAUL,SAASC,cAAc,iBACjCK,SAAUN,SAASC,cAAc,kBAmCnC,SAASM,EAA0BC,GACjCA,EACGC,MAAK,EAACC,SAAEA,EAAQC,MAAEA,KACjBf,EAAAgB,OAAOC,QAAQ,uBAAqBH,EAAY,QAASC,SAAYG,OAEtE,EAAOJ,WAAUC,WAChBf,EAAAgB,OAAMG,QAAC,sBAASL,EAAqB,QAAaC,Q,CAaxD,SAASK,EAAcN,EAAUC,GAC/B,OAAO,IAAIM,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,KACLH,GACFF,EAAQ,C,SAAER,E,MAAUC,IAEtBQ,EAAO,C,SAAET,E,MAAUC,GAAQ,GAC1BA,EAAM,G,CA3Dbb,EAAKC,OAAOyB,iBAAiB,UAAUC,IAErC,GADAA,EAAEC,kBACGD,EAAEE,gBAAkB7B,EAAKC,OAC5B,OAIFD,EAAKO,SAASuB,UAAW,EAEzB,MAAMC,EAiCR,SAAkCC,EAAYC,EAAMC,GAClD,MAAMH,EAAW,GACjB,IAAK,IAAInB,EAAW,EAAGA,EAAWsB,EAAQtB,GAAY,EAAG,CACvD,MAAMuB,EAAeH,EAAaC,EAAOrB,EACzCmB,EAASK,KAAKlB,EAAcN,EAAUuB,G,CAExC,OAAOJ,C,CAvCUM,CACfrC,EAAKI,QAAQkC,cACbtC,EAAKK,OAAOiC,cACZtC,EAAKM,SAASgC,eAGhBP,EAASQ,IAAI9B,GAGbU,QAAQqB,WAAWT,GAAUpB,MAAK,KAChCX,EAAKO,SAASuB,UAAW,CAAK,GAC9B,IAGJ9B,EAAKQ,SAASkB,iBAAiB,SAE/B,WACwBH,KAAKC,SAC3BxB,EAAKI,QAAQqC,MAAQlB,KAAKmB,MAAsB,IAAhBnB,KAAKC,SAAkB,KACvDxB,EAAKK,OAAOoC,MAAQlB,KAAKmB,MAAsB,IAAhBnB,KAAKC,SAAiB,KACrDxB,EAAKM,SAASmC,MAAQlB,KAAKmB,MAAsB,GAAhBnB,KAAKC,SAAgB,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  delayEl: document.querySelector('.form [name=\"delay\"]'),\n  stepEl: document.querySelector('.form [name=\"step\"]'),\n  amountEl: document.querySelector('.form [name=\"amount\"]'),\n  submitEl: document.querySelector('.form .submit'),\n  randomEl: document.querySelector('.form .random'),\n};\n\nrefs.formEl.addEventListener('submit', e => {\n  e.preventDefault();\n  if (!e.currentTarget === refs.formEl) {\n    return;\n  }\n\n  //Disable button\n  refs.submitEl.disabled = true;\n\n  const promises = createPromisesCollection(\n    refs.delayEl.valueAsNumber,\n    refs.stepEl.valueAsNumber,\n    refs.amountEl.valueAsNumber\n  );\n\n  promises.map(processingPromisesResults);\n\n  //Enable button\n  Promise.allSettled(promises).then(() => {\n    refs.submitEl.disabled = false;\n  });\n});\n\nrefs.randomEl.addEventListener('click', randomizeValues);\n\nfunction randomizeValues() {\n  const shouldResolve = Math.random() > 0.3;\n  refs.delayEl.value = Math.floor(Math.random() * 1000 + 500);\n  refs.stepEl.value = Math.floor(Math.random() * 500 + 200);\n  refs.amountEl.value = Math.floor(Math.random() * 10 + 2);\n}\n\nfunction processingPromisesResults(promise) {\n  promise\n    .then(({ position, delay }) =>\n      Notify.success(`✅ Fulfilled promise ${position + 1} in ${delay}ms`)\n    )\n    .catch(({ position, delay }) =>\n      Notify.failure(`❌ Rejected promise ${position + 1} in ${delay}ms`)\n    );\n}\n\nfunction createPromisesCollection(basicDelay, step, amount) {\n  const promises = [];\n  for (let position = 0; position < amount; position += 1) {\n    const currentDelay = basicDelay + step * position;\n    promises.push(createPromise(position, currentDelay));\n  }\n  return promises;\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      }\n      reject({ position, delay });\n    }, delay);\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$refs","formEl","document","querySelector","delayEl","stepEl","amountEl","submitEl","randomEl","$47d4ff9957288465$var$processingPromisesResults","promise","then","position","delay","Notify","success","catch","failure","$47d4ff9957288465$var$createPromise","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","addEventListener","e","preventDefault","currentTarget","disabled","promises","basicDelay","step","amount","currentDelay","push","$47d4ff9957288465$var$createPromisesCollection","valueAsNumber","map","allSettled","value","floor"],"version":3,"file":"03-promises.ff868d27.js.map"}